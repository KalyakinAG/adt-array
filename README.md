# Работа с массивом как с абстрактным типом данных на 1С

Реализована библиотека по работе с массивом. В библиотеке доступны абстрактные функции: Отобрать (filter), НайтиЭлемент (find), Сортировать (sort), Отобразить (map), Преобразовать (reduce), Взять (pop), Положить (push), ДляКаждого (forEach).

Функции библиотеки доступны в серверном и клиентском контекстах.

Реализована также и объектная модель АТД массива. Объектная модель позволяет использовать при работе с АТД массивом текучий интерфейс.

# Примеры

## Конструктор

	Фрукты = РаботаСМассивом.АТДМассив(СтрРазделить("вишня, арбузы, бананы", ", ", Ложь));
	Фрукты.ДляКаждого("Сообщить(Элемент)");// [вишня, арбузы, бананы]

## Сортировать (sort)

	Фрукты.Сортировать();
	Фрукты.ДляКаждого("Сообщить(Элемент)");// [арбузы, бананы, вишня]

## Отобрать (filter)

	Фрукты.Отобрать("СтрНайти(Элемент, ""а"") > 0");
	Фрукты.ДляКаждого("Сообщить(Элемент)");// [арбузы, бананы]

## Отобразить (map)

	Фрукты.Отобразить("ВРег(Лев(Элемент, 1)) + Прав(Элемент, СтрДлина(Элемент) - 1)");
	Фрукты.ДляКаждого("Сообщить(Элемент)");// [Арбузы, Бананы]

## Преобразовать (reduce)

	Количество = Фрукты.Преобразовать("Накопитель + 1", 0);
	Сообщить(Количество);// 2

## Еще примеры

	Элементы.ДоговорКонтрагентов.СвязиПараметровВыбора = РаботаСМассивом.АТДМассив()
		.Положить(Новый СвязьПараметраВыбора("Отбор.Владелец", "Объект.Организация"))
		.ВФиксированныйМассив()
	;

	ДопустимыеТипы = Новый ОписаниеТипов(РаботаСМассивом.АТДМассив()
		.Положить(Тип("СправочникСсылка._ДемоНоменклатура"))
		.Положить(ОбщегоНазначения.ОписаниеТипаСтрока(20))
		.ВМассив())
	;

	Сотрудники = РаботаСМассивом.АТДМассив()
		.Положить(Новый Структура("Фамилия, Имя, Отчество", "Иванов", "Иван", "Иванович"))
		.Положить(Новый Структура("Фамилия, Имя, Отчество", "Иванов", "Иван", "Гермагенович"))
		.Положить(Новый Структура("Фамилия, Имя, Отчество", "Савельев", "Иван", "Иванович"))
		.Положить(Новый Структура("Фамилия, Имя, Отчество", "Андреев", "Иван", "Иванович"))
		.Положить(Новый Структура("Фамилия, Имя, Отчество", "Андреев", "Андрей", "Андреевич"))
	;
	Сотрудники.СортироватьПо("Фамилия, Имя, Отчество");
	Сотрудники.ДляКаждого("Сообщить(СтрШаблон(""%1 %2 %3"", Элемент.Фамилия, Элемент.Имя, Элемент.Отчество))"); // [Андреев Андрей Андреевич, Андреев Иван Иванович, Иванов Иван Гермагенович, Иванов Иван Иванович, Савельев Иван Иванович]

## Совместно с БСП

	Файлы = Новый Массив;
	РаботаСФайлами.ЗаполнитьПрисоединенныеФайлыКОбъекту(СсылкаНаДокумент, Файлы);
	СсылкаНаПрисоединенныйФайл = РаботаСМассивом.АТДМассив(Файлы)
		.Отобрать("СтрНайти(Элемент.Наименование, ""#БДДС#"") > 0")
		.Отобрать("НЕ Элемент.ПометкаУдаления")
		.Взять()
	;

## Пример использования оператора Спрямить (flat)

	МетаданныеРасширений = РаботаСМассивом.АТДМассив(СтрРазделить("Константы, Справочники, Документы, РегистрыСведений, РегистрыНакопления", ", ", Ложь))
		.Отобразить("РаботаСМассивом.АТДМассив(Метаданные[Элемент]).Отобрать(""Элемент.РасширениеКонфигурации() <> Неопределено"").ВМассив()")
		.Спрямить()
		.Отобразить("Новый Структура(""ПолноеИмя, Расширение"", Элемент.ПолноеИмя(), Элемент.РасширениеКонфигурации().Имя)")
		.Отобрать("НЕ СтрНачинаетсяС(Элемент.ПолноеИмя, ""Константа."")")
		.ВМассив()
	;
	Сообщить(ОбщийКлиентСервер.ОбъектВJSON(МетаданныеРасширений));

Смотрите описание в статье на Инфостарт:
- [Работа с абстрактным массивом](https://infostart.ru/1c/articles/1473034/)
- [Абстрактные типы, множества, очереди. Примеры использования](https://infostart.ru/1c/2093459/)

![Инфостарт](https://infostart.ru/bitrix/templates/sandbox_empty/assets/tpl/abo/img/logo.svg)
